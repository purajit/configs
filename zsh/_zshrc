eval "$(/opt/homebrew/bin/brew shellenv)"

if [ "$TMUX" = "" ]; then
  tmux new-session -A -s main
fi

ZSH_HIGHLIGHT_HIGHLIGHTERS=(main brackets regexp)
ZSH_HIGHLIGHT_HIGHLIGHTERS_DIR="$(brew --prefix)/Cellar/zsh-syntax-highlighting/0.8.0/share/zsh-syntax-highlighting/highlighters"
# make -/-- options dimmer
typeset -A ZSH_HIGHLIGHT_REGEXP
ZSH_HIGHLIGHT_REGEXP+=(' -{1,2}[a-zA-Z0-9_-]*' fg=244)
source "$(brew --prefix)/Cellar/zsh-syntax-highlighting/0.8.0/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh"

# oh-my-zsh
plugins=(asdf aws colored-man-pages direnv docker pip terraform venv_manager)
ZSH="$HOME/.oh-my-zsh"
ZSH_THEME="kardanplus"
SHOW_AWS_PROMPT=false
ZSH_CUSTOM="$HOME/.zshcustom/"
source "$ZSH/oh-my-zsh.sh"
# Uncomment the following line to disable colors in ls.
# DISABLE_LS_COLORS="true"

# run-help is alias'd to man by default; change it so we can get zsh builtins
[ "$(type -w run-help)" = 'run-help: alias' ] && unalias run-help
autoload run-help
HELPDIR="/usr/share/zsh/${ZSH_VERSION}/help"

export PATH="$HOME/.config/emacs/bin:$HOME/code/gitstack:$PATH"

# activate the venv_manager plugin, and prevent venvs from modifying prompt
export VIRTUAL_ENV_DISABLE_PROMPT=1
precmd() {
  venv_manager_switch_venv
}

if [[ -f "$HOME/.cargo/env" ]]; then
  . "$HOME/.cargo/env"
fi

eval "$(fzf --zsh)"

source "$HOME/.zshwork"
